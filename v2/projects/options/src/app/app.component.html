<div class="options-container">
  <div class="options-wrapper">
    <h1>GitHub Notifications - Options</h1>

    <div class="options-form">
      <div class="input-group">
        <label for="token">GitHub Personal Access Token *:</label>
        <input
          type="password"
          id="token"
          [(ngModel)]="config.token"
          (input)="onTokenChange()"
          placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
          class="token-input"
          />
        </div>

        <div class="help-text">
          <p>
            * Go to
            <a href="https://github.com/settings/tokens/new" target="_blank"
              >New personal access token</a
              >
              on GitHub, and create a token with "repo" and "user" scope checked.
              Paste the token in the box above when you're done.
            </p>
          </div>

          @if (config.username) {
            <div class="username-display">
              <strong>Username:</strong> {{ config.username }}
            </div>
          }

          @if (error) {
            <div class="error-message">
              {{ error }}
            </div>
          }

          <div class="button-group">
            <button
              (click)="onSave()"
              [disabled]="loading || !config.token.trim()"
              class="save-btn"
              >
              @if (loading) {
                <span class="spinner"></span>
              }
              {{ loading ? "Validating..." : "Save" }}
            </button>

            @if (displayMessage) {
              <div class="success-message">
                Settings saved!
              </div>
            }
          </div>
        </div>

        <div class="info-section">
          <h3>How it works</h3>
          <ul>
            <li>This extension monitors your assigned pull requests on GitHub</li>
            <li>The badge shows the number of open PRs assigned to you</li>
            <li>Green badge: 1-3 PRs, Orange: 4-8 PRs, Red: 9+ PRs</li>
            <li>Click the extension icon to see all your PRs</li>
            <li>Data refreshes every minute</li>
          </ul>
        </div>
      </div>
    </div>
